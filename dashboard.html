<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë…ë¦½ AI ì‹¤í—˜ì‹¤ - ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body{
  margin:0;
  font-family:'Inter','Noto Sans KR',sans-serif;
  background:#f4f6f9;
  color:#1e293b;
}
header{
  background:linear-gradient(135deg,#667eea,#764ba2);
  color:#fff;
  text-align:center;
  padding:50px 20px;
}
h1{margin:0;font-size:2.3rem;font-weight:800;}
.subtitle{opacity:.9;margin-top:10px}

.container{max-width:1100px;margin:auto;padding:30px 20px}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:20px;
}

.card{
  background:#fff;
  padding:25px;
  border-radius:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.05);
  transition:.3s;
}
.card:hover{transform:translateY(-6px)}

.value{font-size:2.2rem;font-weight:800;margin:10px 0}
.label{color:#64748b}

.status{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:.85rem;
  color:#10b981;
}

.activity{
  margin-top:40px;
  background:#fff;
  padding:25px;
  border-radius:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.05);
}

.activity-item{
  padding:10px 0;
  border-bottom:1px solid #eee;
}
.activity-item:last-child{border-bottom:none}

.dark body{background:#0f172a;color:#e2e8f0}
.dark .card,.dark .activity{background:#1e293b}
</style>
</head>

<body>

<header>
  <h1>ğŸ¤– ë…ë¦½ AI ì‹¤í—˜ì‹¤</h1>
  <div class="subtitle">ì‹¤ì‹œê°„ ìë™í™” ëŒ€ì‹œë³´ë“œ</div>
</header>

<div class="container">

<div class="grid">

<div class="card">
<div class="status">â— í™œì„±</div>
<div class="value" id="post-count">...</div>
<div class="label">ì´ í¬ìŠ¤íŠ¸</div>
</div>

<div class="card">
<div class="value" id="deploy-count">...</div>
<div class="label">ë°°í¬ íšŸìˆ˜</div>
</div>

<div class="card">
<div class="value" id="site-status">...</div>
<div class="label">ì‚¬ì´íŠ¸ ìƒíƒœ</div>
</div>

<div class="card">
<div class="value" id="last-update">...</div>
<div class="label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</div>
</div>

</div>

<div class="activity">
<h3>ìµœê·¼ ì»¤ë°‹ í™œë™</h3>
<div id="activity-timeline">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
</div>

</div>

<script>
const repoOwner="jkimjoon70";
const repoName="jkimjoon70.github.io";
const siteUrl="https://jkimjoon70.github.io";
const api="https://api.github.com";

async function loadDashboard(){

  // í¬ìŠ¤íŠ¸ ìˆ˜
  const posts = await fetch(`${api}/repos/${repoOwner}/${repoName}/contents/_posts`);
  if(posts.ok){
    const data = await posts.json();
    document.getElementById("post-count").innerText=data.length;
  }

  // ë°°í¬ íšŸìˆ˜
  const deploy = await fetch(`${api}/repos/${repoOwner}/${repoName}/deployments`);
  if(deploy.ok){
    const d = await deploy.json();
    document.getElementById("deploy-count").innerText=d.length;
  }

  // ì‚¬ì´íŠ¸ ìƒíƒœ
  try{
    await fetch(siteUrl,{mode:"no-cors"});
    document.getElementById("site-status").innerText="Online";
  }catch{
    document.getElementById("site-status").innerText="Offline";
  }

  // ìµœê·¼ ì»¤ë°‹
  const commits = await fetch(`${api}/repos/${repoOwner}/${repoName}/commits?per_page=5`);
  if(commits.ok){
    const c = await commits.json();
    const html = c.map(x=>`
      <div class="activity-item">
        ${x.commit.message}<br>
        <small>${x.commit.author.name}</small>
      </div>
    `).join("");
    document.getElementById("activity-timeline").innerHTML=html;
    document.getElementById("last-update").innerText=
      new Date(c[0].commit.author.date).toLocaleDateString("ko-KR");
  }
}

loadDashboard();
setInterval(loadDashboard,300000);
</script>

</body>
</html>
