name: âš¾ MLB ê²½ê¸° ì¢…ë£Œ ìë™ í¬ìŠ¤íŠ¸

on:
  schedule:
    # 10ë¶„ë§ˆë‹¤ ì‹¤í–‰ â†’ ê²½ê¸° ì¢…ë£Œ ê°ì§€
    - cron: '*/10 * * * *'

  workflow_dispatch:

jobs:
  generate-mlb-post:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ ë ˆí¬ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ğŸ Python ì„¤ì¹˜
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: ğŸ“¦ íŒ¨í‚¤ì§€ ì„¤ì¹˜
        run: |
          pip install requests anthropic pytz

      - name: âš¾ MLB í¬ìŠ¤íŠ¸ ìƒì„± ì‹¤í–‰
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          python automation/mlb_auto_post.py

      - name: ğŸ“¤ ë³€ê²½ì‚¬í•­ ì»¤ë°‹ & í‘¸ì‹œ
        run: |
          git config --local user.email "mlb-bot@github.io"
          git config --local user.name "MLB Bot"

          git add _posts/

          git diff --staged --quiet || git commit -m "âš¾ MLB ê²½ê¸° ì¢…ë£Œ ìë™ ì—…ë°ì´íŠ¸"
          git push
